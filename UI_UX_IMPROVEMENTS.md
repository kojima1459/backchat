# UI/UX改善提案

## 1. はじめに

「しれっとToDo Chat」は、独創的なコンセプトと洗練されたデザインを持つ一方で、さらなるユーザー体験の向上が可能です。本ドキュメントでは、**優先度付き**でUI/UXの改善提案を行います。

---

## 2. 改善提案（優先度別）

### 🔴 優先度S: 緊急度・影響度ともに高い

#### S-1. プッシュ通知の実装

**現状の問題**: 新着メッセージがあっても、ユーザーがアプリを開かない限り気づけない。

**改善案**: PWAのプッシュ通知APIを利用し、新着メッセージを通知する。ただし、通知内容は「新着メッセージがあります」のみとし、メッセージ本文は表示しない（プライバシー保護）。

**実装イメージ**:
- Service Workerで`push`イベントをリッスン
- Firebase Cloud Messagingを利用
- 通知許可のダイアログを初回起動時に表示

**期待される効果**:
- ユーザーの応答速度が向上
- エンゲージメントの向上

---

#### S-2. ルームキーの再利用可能化

**現状の問題**: 一度退出すると、同じキーで再入室できない。毎回新しいキーを生成する必要があり、不便。

**改善案**: ルームを「一時退出」できるようにし、同じキーで再入室可能にする。ただし、「完全削除」も選択肢として残す。

**実装イメージ**:
- `rooms`コレクションに`status`フィールドを追加（`active`, `paused`, `deleted`）
- 退出時に「一時退出」と「完全削除」を選択できるモーダルを表示

**期待される効果**:
- 長期的な関係性を持つユーザーの利便性向上
- ルームキーの管理が容易に

---

### 🟠 優先度A: 影響度が高い

#### A-1. QRコードによるルームキー共有

**現状の問題**: ルームキーをコピー＆ペーストで共有する必要があり、対面での共有がしにくい。

**改善案**: ルームキーをQRコードで表示し、相手がカメラで読み取ることで即座に入室できるようにする。

**実装イメージ**:
- `qrcode.react`ライブラリを利用
- Join画面に「QRコード表示」ボタンを追加
- カメラ読み取り機能も実装（`html5-qrcode`ライブラリ）

**期待される効果**:
- 対面での共有が容易に
- 入力ミスの削減

---

#### A-2. オフライン時の過去メッセージ閲覧

**現状の問題**: オフライン時は過去のメッセージも閲覧できず、不便。

**改善案**: IndexedDBにメッセージをキャッシュし、オフライン時でも過去のメッセージを閲覧できるようにする。

**実装イメージ**:
- `Dexie.js`などのIndexedDBラッパーを利用
- メッセージ受信時にIndexedDBに保存
- オフライン時はIndexedDBから読み込み

**期待される効果**:
- オフライン時の利便性向上
- ユーザー満足度の向上

---

#### A-3. 長押し時間のカスタマイズ

**現状の問題**: 5秒という長押し時間は、ユーザーによっては長く感じる可能性がある。

**改善案**: 設定画面で長押し時間を変更できるようにする（3秒、5秒、7秒から選択）。

**実装イメージ**:
- localStorageに長押し時間を保存
- `useLongPress`フックで設定値を参照

**期待される効果**:
- ユーザーの好みに応じたカスタマイズが可能
- 誤操作の防止

---

### 🟡 優先度B: あると嬉しい

#### B-1. メッセージの編集機能

**現状の問題**: 送信後のメッセージを編集できず、誤字脱字があった場合に不便。

**改善案**: 送信後5分以内であれば、メッセージを編集できるようにする。編集履歴は表示しない。

**実装イメージ**:
- メッセージに`editedAt`フィールドを追加
- 編集ボタンをメッセージの右側に表示

**期待される効果**:
- ユーザーの満足度向上
- コミュニケーションの質の向上

---

#### B-2. メッセージの検索機能

**現状の問題**: 過去のメッセージを探すのが困難。

**改善案**: チャット画面に検索バーを追加し、キーワードでメッセージを検索できるようにする。

**実装イメージ**:
- Firestoreの`where`クエリを利用
- 検索結果をハイライト表示

**期待される効果**:
- 過去の会話の振り返りが容易に
- ユーザーの利便性向上

---

#### B-3. ダークモードの実装

**現状の問題**: 夜間の利用時に画面が眩しい。

**改善案**: ダークモードを実装し、設定画面で切り替えられるようにする。

**実装イメージ**:
- TailwindCSSの`dark:`プレフィックスを利用
- localStorageにダークモード設定を保存

**期待される効果**:
- 夜間の利用時の快適性向上
- バッテリー消費の削減（OLEDディスプレイの場合）

---

### 🟢 優先度C: 将来的に検討

#### C-1. ボイスメッセージ機能

**現状の問題**: テキストのみでは感情が伝わりにくい。

**改善案**: 音声を録音して送信できるボイスメッセージ機能を実装する。

**実装イメージ**:
- `MediaRecorder` APIを利用
- Firebase Storageに音声ファイルを保存

**期待される効果**:
- 感情表現の豊かさ向上
- コミュニケーションの活性化

---

#### C-2. 既読・未読の表示

**現状の問題**: 相手がメッセージを読んだかどうかが分からない。

**改善案**: メッセージに既読・未読のステータスを表示する。

**実装イメージ**:
- `readBy`フィールドを利用
- 既読の場合は「✓✓」、未読の場合は「✓」を表示

**期待される効果**:
- コミュニケーションの円滑化
- ユーザーの安心感向上

---

## 3. 実装の優先順位

| 優先度 | 施策 | 実装工数 | 期待される効果 |
|:---|:---|:---|:---|
| S | プッシュ通知 | 中 | エンゲージメント向上 |
| S | ルームキー再利用 | 小 | 利便性向上 |
| A | QRコード共有 | 小 | 対面共有の容易化 |
| A | オフライン閲覧 | 中 | オフライン時の利便性向上 |
| A | 長押し時間カスタマイズ | 小 | ユーザー体験の向上 |
| B | メッセージ編集 | 小 | 満足度向上 |
| B | メッセージ検索 | 中 | 利便性向上 |
| B | ダークモード | 小 | 夜間の快適性向上 |
| C | ボイスメッセージ | 大 | 表現力向上 |
| C | 既読・未読表示 | 小 | コミュニケーション円滑化 |

---

## 4. おわりに

これらの改善を段階的に実装することで、「しれっとToDo Chat」はより使いやすく、愛されるサービスへと成長できます。優先度Sの施策から着手し、ユーザーフィードバックを収集しながら、継続的に改善を進めることが重要です。
